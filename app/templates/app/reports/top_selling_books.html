{% extends "app/base.html" %}
{% block title %}Top Selling Books{% endblock %}
{% block content %}
	<div class="d-flex justify-content-between align-items-center mb-3">
		<h2 class="m-0">Top 50 selling books</h2>
	</div>
	<div class="card">
		<div class="table-responsive">
			<table class="table table-striped table-hover table-sm align-middle mb-0">
				<thead class="table-dark">
					<tr>
						<th>
							<a class="text-reset ms-1" href="?{% if querystring %}{{ querystring }}&{% endif %}sort={% if sort == 'name' %}-name{% else %}name{% endif %}">
								Book
								{% if sort == 'name' %}<small>↑</small>{% elif sort == '-name' %}<small>↓</small>{% endif %}
							</a>
						</th>
						<th>
							<a class="text-reset ms-1" href="?{% if querystring %}{{ querystring }}&{% endif %}sort={% if sort == 'author' %}-author{% else %}author{% endif %}">
								Author
								{% if sort == 'author' %}<small>↑</small>{% elif sort == '-author' %}<small>↓</small>{% endif %}
							</a>
						</th>
						<th class="text-end">
							<a class="text-reset ms-1" href="?{% if querystring %}{{ querystring }}&{% endif %}sort={% if sort == 'total_sales' %}-total_sales{% else %}total_sales{% endif %}">
								Book total sales
								{% if sort == 'total_sales' %}<small>↑</small>{% elif sort == '-total_sales' %}<small>↓</small>{% endif %}
							</a>
						</th>
						<th class="text-end">
							<a class="text-reset ms-1" href="?{% if querystring %}{{ querystring }}&{% endif %}sort={% if sort == 'author_total_sales' %}-author_total_sales{% else %}author_total_sales{% endif %}">
								Author total sales
								{% if sort == 'author_total_sales' %}<small>↑</small>{% elif sort == '-author_total_sales' %}<small>↓</small>{% endif %}
							</a>
						</th>
						<th>
							<a class="text-reset ms-1" href="?{% if querystring %}{{ querystring }}&{% endif %}sort={% if sort == 'on_top5_publication_year' %}-on_top5_publication_year{% else %}on_top5_publication_year{% endif %}">
								Top 5 on publication year?
								{% if sort == 'on_top5_publication_year' %}<small>↑</small>{% elif sort == '-on_top5_publication_year' %}<small>↓</small>{% endif %}
							</a>
						</th>
					</tr>
				</thead>
				<tbody>
					{% for b in books %}
						<tr>
							<td><a href="{% url 'book_detail' b.id %}">{{ b.name }}</a></td>
							<td><a href="{% url 'author_detail' b.author.id %}">{{ b.author.name }}</a></td>
							<td class="text-end">{{ b.total_sales }}</td>
							<td class="text-end">{{ b.author_total_sales }}</td>
							<td>
								{% if b.on_top5_publication_year %}
									<span class="badge text-bg-success">Yes</span>
								{% else %}
									<span class="badge text-bg-secondary">No</span>
								{% endif %}
							</td>
						</tr>
					{% empty %}
						<tr>
							<td colspan="5" class="text-center text-muted py-4">No data</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
{% endblock %}
